# Instructions GitHub Copilot - Projet Notificateur de Temps Telegram

## ğŸ¯ Objectifs du Projet
- **Objectif principal** : SystÃ¨me de notification automatique via Telegram pour rappeler l'arrosage des plantes
- **FonctionnalitÃ© actuelle** : Envoi de l'heure actuelle via bot Telegram avec GitHub Actions
- **Evolution prÃ©vue** : IntÃ©grer des rappels spÃ©cifiques pour l'arrosage des plantes

## ğŸ“‹ Standards de DÃ©veloppement

### ğŸ”„ Ã€ chaque nouveau dÃ©veloppement :

#### 1. **Documentation obligatoire**
- Mettre Ã  jour ce fichier avec les nouvelles fonctionnalitÃ©s
- Documenter toutes les fonctions avec des docstrings Python
- Ajouter des commentaires pour la logique complexe
- Mettre Ã  jour le README.md si nÃ©cessaire

#### 2. **Tests obligatoires**
- CrÃ©er des tests unitaires pour chaque nouvelle fonction
- Utiliser pytest comme framework de test
- Tester les cas d'erreur et les edge cases
- Maintenir une couverture de test > 80%

#### 3. **Bonnes pratiques**
- Utiliser le type hinting Python
- Suivre les conventions PEP 8
- GÃ©rer les erreurs de maniÃ¨re robuste
- Utiliser des variables d'environnement pour la configuration

## ğŸŒ± FonctionnalitÃ©s DÃ©veloppÃ©es

### âœ… Version 1.0 - Notificateur de Temps
**Date** : Mai 2025  
**Description** : Script de base envoyant l'heure actuelle via Telegram  
**Fichiers** :
- `time_notifier.py` : Classe principale avec envoi de message et test de connexion
- `requirements.txt` : DÃ©pendances (requests)
- `test_setup.py` : Tests de configuration

**Tests** : Tests de connexion basiques  
**Documentation** : Docstrings complÃ¨tes, README initial

### âœ… Version 1.1 - Journalisation JSON avec Push Automatique
**Date** : 28 Mai 2025  
**Description** : Journalisation complÃ¨te des notifications Telegram dans un fichier JSON avec push automatique vers GitHub  
**Fichiers modifiÃ©s/ajoutÃ©s** :
- `time_notifier.py` : Ajout des mÃ©thodes `_ensure_log_file_exists()` et `_log_notification()` pour la journalisation JSON
- `.github/workflows/time-notification.yml` : Ajout du push automatique du fichier de log
- `.github/workflows/daily-time.yml` : Ajout du push automatique du fichier de log
- `test_logging.py` : Tests complets pour la fonctionnalitÃ© de journalisation
- `requirements.txt` : Ajout de pytest pour les tests

**FonctionnalitÃ©s ajoutÃ©es** :
- Journalisation JSON avec structure complÃ¨te (mÃ©tadonnÃ©es, notifications)
- Chaque notification contient : ID unique, timestamp, message, statut, rÃ©ponse Telegram
- Push automatique du fichier `notifications_log.json` vers la branche main aprÃ¨s chaque notification
- Gestion robuste des erreurs de journalisation
- Tests unitaires complets

**Tests ajoutÃ©s** : Tests de structure JSON, logging des succÃ¨s/erreurs, robustesse  
**Documentation** : Docstrings complÃ¨tes pour toutes les nouvelles mÃ©thodes  
**Impact** : TraÃ§abilitÃ© complÃ¨te des notifications sans impact sur les fonctionnalitÃ©s existantes

### ğŸš€ Prochaines FonctionnalitÃ©s PrÃ©vues
- [ ] **Planificateur d'arrosage** : SystÃ¨me de rappels personnalisÃ©s pour diffÃ©rentes plantes
- [ ] **Base de donnÃ©es** : Stockage des informations sur les plantes (frÃ©quence d'arrosage, derniÃ¨re fois arrosÃ©e)
- [ ] **Interface de commandes** : Commandes Telegram pour gÃ©rer les plantes (/add_plant, /water_plant, etc.)
- [ ] **Notifications intelligentes** : Rappels basÃ©s sur les besoins spÃ©cifiques de chaque plante

## ğŸ§ª Structure des Tests
```
tests/
â”œâ”€â”€ test_telegram_notifier.py  # Tests de la classe principale
â”œâ”€â”€ test_plant_manager.py      # Tests du gestionnaire de plantes (Ã  venir)
â””â”€â”€ test_integration.py        # Tests d'intÃ©gration
```

## ğŸ“ Architecture Cible
```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ notifier/
â”‚   â”‚   â”œâ”€â”€ telegram_client.py
â”‚   â”‚   â””â”€â”€ time_notifier.py
â”‚   â”œâ”€â”€ plants/
â”‚   â”‚   â”œâ”€â”€ plant_manager.py
â”‚   â”‚   â””â”€â”€ plant_scheduler.py
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ config.py
â”œâ”€â”€ tests/
â”œâ”€â”€ docs/
â””â”€â”€ .github/workflows/
```

## ğŸ”§ Commandes de DÃ©veloppement
```bash
# Tests
pytest tests/ -v --cov=src

# Linting
flake8 src/
black src/

# Documentation
sphinx-build docs/ docs/_build/
```

## ğŸ“ Template pour Nouvelles FonctionnalitÃ©s

Quand une nouvelle fonctionnalitÃ© est dÃ©veloppÃ©e, ajouter ici :

### âœ… [Nom de la FonctionnalitÃ©]
**Date** : [Date]  
**Description** : [Description courte]  
**Fichiers modifiÃ©s/ajoutÃ©s** :
- `file.py` : [Description des changements]

**Tests ajoutÃ©s** : [Description des tests]  
**Documentation** : [Mise Ã  jour de la doc]  
**Impact** : [Impact sur les autres fonctionnalitÃ©s]

---
*DerniÃ¨re mise Ã  jour : 28 Mai 2025*
